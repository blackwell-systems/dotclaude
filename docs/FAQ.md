# Frequently Asked Questions

Common questions about dotclaude and profile management.

## General Questions

### Do I edit `~/.claude/CLAUDE.md` directly?

**No.** Edit `base/CLAUDE.md` or `profiles/*/CLAUDE.md`, then run `dotclaude activate` to merge and deploy.

The files in `~/.claude/` are generated by merging base + profile. Think of them as build artifacts - you edit the source, not the result.

**Correct workflow:**
```bash
# Edit the source
vim base/CLAUDE.md
# or
dotclaude edit my-project

# Then activate to deploy
dotclaude activate my-project

# Verify the result
cat ~/.claude/CLAUDE.md
```

---

### What goes in base vs profiles?

**Base = universal practices** that apply to ALL your work:
- Git workflow and commit standards
- Security practices (no secrets, input validation)
- Tool preferences (Read instead of cat)
- Task management (TodoWrite usage)

**Profiles = project-specific details**:
- Tech stack (Node.js vs Python, React vs Vue)
- Team coding standards (formatting, naming)
- API design patterns
- Company policies (HIPAA compliance, SOC2)

**Rule of thumb:** If it applies to ALL your work, it's base. If it's specific to one project or context, it's a profile.

---

### Can I share profiles with my team?

**Yes!** Commit your dotclaude repo to git and share it.

**Benefits:**
- Everyone gets consistent Claude Code behavior
- New team members clone and activate
- Changes sync via git
- Version-controlled configuration

**Example:**
```bash
# Team member clones your repo
git clone https://github.com/your-team/dotclaude.git ~/code/dotclaude
cd ~/code/dotclaude
./install.sh
dotclaude activate team-project

# Everyone now has identical Claude Code configuration
```

---

### What if I only have one project?

**You probably don't need dotclaude.**

Just edit `~/.claude/CLAUDE.md` directly. dotclaude is designed for managing multiple contexts with different requirements.

**When dotclaude makes sense:**
- ✅ You work on 3+ projects with different tech stacks
- ✅ You switch between OSS, client, and employer work
- ✅ Different projects have different compliance needs
- ✅ You want to sync configs across multiple machines

**When it's overkill:**
- ❌ Single project that never changes
- ❌ All your projects use identical practices
- ❌ You're happy editing CLAUDE.md manually

---

### Do profiles replace base or add to it?

**Profiles ADD to base.** Both are merged together.

This is the most important concept in dotclaude:

```
base/CLAUDE.md (200 lines)
    +
profiles/my-project/CLAUDE.md (50 lines)
    =
~/.claude/CLAUDE.md (250 lines)
```

**Why this matters:**
- ✅ Write universal rules ONCE in base
- ✅ Profiles stay small and focused
- ✅ No duplication across profiles
- ❌ DON'T copy "never commit secrets" into every profile - it's already in base

**Think of it like CSS:** Base is your reset.css (applies everywhere), profiles are component-specific styles.

---

### How do I see what Claude Code is actually reading?

View the merged result:
```bash
cat ~/.claude/CLAUDE.md
```

This shows the final configuration after base + profile merge.

**To see what changed:**
```bash
# Compare profiles
dotclaude diff profile1 profile2

# Preview before activating
dotclaude activate my-project --dry-run
```

---

### Can I use different Claude models per profile?

**Yes.** Add `settings.json` to your profile with model preference.

**Example: `profiles/my-project/settings.json`**
```json
{
  "model": "opus",
  "provider": "anthropic-claude-max"
}
```

**Available models:**
- `"sonnet"` - Balanced performance and cost
- `"opus"` - Maximum capability
- `"haiku"` - Fast and economical

**Available providers:**
- `"anthropic-claude-max"` - Claude.ai web service
- `"aws-bedrock"` - AWS Bedrock service

---

### How do I troubleshoot issues?

**Enable debug mode** to see detailed operation logs:

```bash
# Method 1: Use --verbose flag (add to end of command)
dotclaude activate my-project --verbose
dotclaude list --verbose
dotclaude switch --verbose

# Method 2: Set DEBUG environment variable
DEBUG=1 dotclaude activate my-project

# Method 3: Enable for entire session
export DEBUG=1
dotclaude list
dotclaude activate my-project
```

**Debug output includes:**
- Command parsing and arguments
- File paths being used
- Validation checks
- Lock acquisition
- Profile discovery
- Merge operations

**Debug log file:**
```bash
# View debug log
cat ~/.claude/.dotclaude-debug.log

# Watch in real-time
tail -f ~/.claude/.dotclaude-debug.log
```

---

## Profile Management Questions

### How do I create a new profile?

**Option 1: Copy from example (recommended)**
```bash
cp -r examples/sample-profile profiles/my-new-project
dotclaude edit my-new-project
dotclaude activate my-new-project
```

**Option 2: Use create command**
```bash
dotclaude create my-new-project
# Opens empty template
dotclaude activate my-new-project
```

---

### Can I rename a profile?

**Yes.** Just rename the directory:
```bash
cd ~/code/dotclaude
mv profiles/old-name profiles/new-name
dotclaude list  # Will show new name
```

If the renamed profile was active, reactivate with new name:
```bash
dotclaude activate new-name
```

---

### How do I delete a profile?

```bash
cd ~/code/dotclaude
rm -rf profiles/profile-to-delete
dotclaude list  # Confirm it's gone
```

If you delete the active profile, activate a different one:
```bash
dotclaude switch
```

---

### Can profiles inherit from each other?

**Not directly.** All profiles inherit from base, but not from other profiles.

**Workaround:** If multiple profiles need similar content, either:
1. Move shared content to base
2. Create a base profile and manually copy to specific profiles
3. Use symlinks (advanced)

---

## Technical Questions

### Where are my files?

**Source files (what you edit):**
```
~/code/dotclaude/
├── base/CLAUDE.md           # Universal standards
└── profiles/my-project/     # Your profiles
    └── CLAUDE.md
```

**Deployed files (what Claude Code reads):**
```
~/.claude/
├── CLAUDE.md                # Merged result
├── settings.json            # Active profile settings
└── .current-profile         # Tracking file
```

**Rule:** Edit source files, activate to deploy.

---

### What happens to my existing ~/.claude/ configuration?

**It's backed up automatically** before activation:
```
~/.claude/
├── CLAUDE.md
├── CLAUDE.md.backup.20251129-143000
├── CLAUDE.md.backup.20251129-142000
└── ...
```

Restore anytime with:
```bash
dotclaude restore
```

---

### Can I use dotclaude with project-specific .claude/ directories?

**Yes.** dotclaude manages global `~/.claude/` configuration. Projects can still have their own `.claude/settings.json` that override global settings.

**How it works:**
1. dotclaude sets global config in `~/.claude/`
2. Your project has `.claude/settings.json` with project-specific overrides
3. Claude Code reads both (project settings win on conflicts)

---

### Does switching profiles affect my other projects?

**Yes.** Profiles are global - they change `~/.claude/` for ALL Claude Code sessions.

**Best practice:**
- Create profiles that represent work contexts (OSS, client, employer)
- Activate the appropriate profile when switching contexts
- Use `.dotclaude` file in projects to auto-detect mismatches

**Auto-detection example:**
```bash
cd ~/my-oss-project
# Claude Code starts and checks .dotclaude file
# Warns if wrong profile is active
```

---

## Workflow Questions

### What's the daily workflow?

```bash
# Morning: Starting work on OSS project
cd ~/my-oss-project
dotclaude activate my-oss-project

# Afternoon: Switch to client work
cd ~/client-project
dotclaude activate client-work

# Check current state anytime
dotclaude show
```

---

### How do I preview changes before activating?

Use `--dry-run` mode:
```bash
dotclaude activate my-project --dry-run
```

Shows:
- What files would be backed up
- What would be merged
- Preview of merged content
- No actual changes made

---

### Can I temporarily try a profile?

**Currently no.** Activation always makes changes (with backup).

**Workaround:**
1. Note current profile: `dotclaude show`
2. Try new profile: `dotclaude activate test-profile`
3. Switch back: `dotclaude activate previous-profile`
4. Or restore: `dotclaude restore`

---

## Advanced Questions

### Can I customize the merge behavior?

**Not currently.** Profiles are always appended after base.

The merge is simple concatenation:
```
base/CLAUDE.md
+
# =========================================
# Profile-Specific Additions: my-project
# =========================================
+
profiles/my-project/CLAUDE.md
```

---

### Can I have profile-specific scripts or tools?

**Not currently.** All scripts live in `base/scripts/` and are shared.

**Workaround:** Use hooks in profile's `settings.json`:
```json
{
  "hooks": {
    "sessionStart": "bash ~/my-project/scripts/project-setup.sh"
  }
}
```

---

### How do I sync profiles across machines?

**Use git!** That's the whole point:

```bash
# Machine 1: Make changes
cd ~/code/dotclaude
vim profiles/my-project/CLAUDE.md
git add -A
git commit -m "Update project standards"
git push

# Machine 2: Pull and activate
cd ~/code/dotclaude
git pull
dotclaude activate my-project
```

---

## Troubleshooting

### Command not found: dotclaude

**Cause:** `~/.local/bin` not in PATH or install didn't complete.

**Fix:**
```bash
# Check if file exists
ls -la ~/.local/bin/dotclaude

# If missing, reinstall
cd ~/code/dotclaude && ./install.sh

# Add to PATH if needed
echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc
```

---

### Profile activated but Claude Code doesn't see it

**Cause:** Claude Code hasn't reloaded configuration.

**Fix:**
1. Close Claude Code completely
2. Reopen Claude Code
3. Verify: `cat ~/.claude/CLAUDE.md`

---

### Another dotclaude operation in progress

**Cause:** Lock file from previous operation or crash.

**Fix:**
```bash
# Remove stale lock
rm ~/.claude/.activation.lock

# Try again
dotclaude activate my-project
```

---

### Profiles list is empty

**Cause:** You haven't created any profiles yet. `profiles/` starts empty by design.

**Fix:**
```bash
# Copy example to start
cp -r examples/sample-profile profiles/my-first-profile

# Verify
dotclaude list

# Activate
dotclaude activate my-first-profile
```

---

## Still Have Questions?

- **[Complete Usage Guide](USAGE.md)** - Comprehensive command reference
- **[Architecture Documentation](ARCHITECTURE.md)** - Technical details
- **[GitHub Issues](https://github.com/blackwell-systems/dotclaude/issues)** - Report bugs or ask questions
- **[Sample Profile](https://github.com/blackwell-systems/dotclaude/blob/main/examples/sample-profile/README.md)** - Learn by example
